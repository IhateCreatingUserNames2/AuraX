<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura | Biographical Agents By Cognai</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
                    <path d="M8 12L16 8L24 12L16 24L8 12Z" fill="white" fill-opacity="0.9"/>
                    <defs>
                        <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                            <stop offset="0%" stop-color="#667eea"/>
                            <stop offset="100%" stop-color="#764ba2"/>
                        </linearGradient>
                    </defs>
                </svg>
                <span class="logo-text">Aura</span>
            </div>
            <button class="sidebar-toggle" id="sidebar-toggle">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M3 5h14M3 10h14M3 15h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>

        <div class="sidebar-content">
            <a href="#" class="create-btn" id="create-agent-nav-btn">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"/></svg>
                <span>Create Agent</span>
            </a>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" id="discover-tab">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                    Discover
                </a>
                <a href="#" class="nav-item" id="my-agents-tab">
                     <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline></svg>
                    My Agents
                </a>
            </nav>

            <div class="agents-section" id="agents-section">
                <div class="section-header">
                    <h3>Recent Chats</h3>
                    <span class="agent-count" id="agent-count">0</span>
                </div>
                <div class="agents-list" id="agents-list">
                    <!-- Chat sessions will be populated here -->
                </div>
            </div>
        </div>

        <div class="sidebar-footer">
            <div class="user-profile" id="user-profile">
                <div class="user-avatar">
                    <span id="user-initial">G</span>
                </div>
                <div class="user-info">
                    <span class="username" id="username-display">Guest</span>
                    <button class="user-menu-btn" id="user-menu-btn">‚ãØ</button>
                </div>
            </div>
            <div class="user-menu" id="user-menu" style="display: none;">
                <a href="#" id="logout-btn" style="display: none;">Logout</a>
                <a href="#" id="login-btn">Login</a>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="main-content">
        <!-- Welcome/Discover View -->
        <div class="view" id="discover-view">
            <div class="discover-header">
                <h1>Aura CEAF V3</h1>
                <p>Chat with Biographical AI Agents with narrative contextual Memories.</p>
                <p> Aura now can be Accessed through WhatsApp: +55 62 9985-6520 </p>
            </div>

            <div class="featured-agents" id="featured-agents">
                <h2>üè™ Agent Marketplace</h2>
                <div class="featured-grid" id="featured-grid">
                    <!-- Featured agents will be populated here -->
                </div>
            </div>
        </div>

        <!-- My Agents View -->
        <div class="view" id="my-agents-view" style="display: none;">
            <div class="discover-header">
                <h1>My Agents</h1>
                <p>Manage your private agents created from scratch or cloned from the marketplace.</p>
            </div>
            <div class="my-agents-grid" id="my-agents-grid">
                <!-- User's agents will be populated here -->
            </div>
        </div>

        <!-- Chat View -->
        <div class="view" id="chat-view" style="display: none;">
            <div class="chat-header" id="chat-header">
                <div class="agent-info" id="current-agent-info">
                    <div class="agent-avatar" id="current-agent-avatar">
                        <img src="" alt="Agent Avatar" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <span style="display: none;">A</span>
                    </div>
                    <div class="agent-details">
                        <h2 id="current-agent-name">Agent Name</h2>
                        <p id="current-agent-description">Agent description</p>
                        <div class="model-selector-container">
                            <label for="chat-model-selector" class="model-label">Model:</label>
                            <select id="chat-model-selector" class="model-selector"></select>
                        </div>
                    </div>
                </div>

                <div class="chat-actions">
                    <button class="action-btn" id="toggle-dashboard-btn" title="View Cognitive State">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"/>
            <path d="M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"/>
            <path d="M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"/>
        </svg>
    </button>

                      <!-- NOVO BOT√ÉO: Twerk/Settings -->
    <button class="action-btn" id="agent-settings-btn" title="Twerk / Configure Agent">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
    </button>

                     <button class="action-btn" id="share-btn" title="Share Chat (Coming Soon)">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path d="M15 8a3 3 0 11-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 11-.895 1.789L6.186 13.97a3 3 0 110-7.94l4.94-2.47A3 3 0 1115 8z"/></svg>
                    </button>
                    <div class="dropdown-container">
                        <button class="action-btn" id="menu-btn" title="Menu">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"/></svg>
                        </button>
                        <div class="dropdown-menu" id="agent-dropdown-menu">
                            <a href="#" id="agent-files-menu-btn">üóÇÔ∏è Knowledge Files</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-messages" id="chat-messages">
                <!-- Messages will be populated here -->
            </div>

            <div class="cognitive-dashboard" id="cognitive-dashboard" style="display: none;">
                <div class="dashboard-header">
                    <h3>üß† Cognitive State</h3>
                    <button class="dashboard-close" id="dashboard-close-btn">√ó</button>
                </div>

                <!-- Estado Interno -->
                <div class="dashboard-section">
                    <h4>Internal State</h4>
                    <div class="metric-bar">
                        <label>Cognitive Fatigue</label>
                        <progress id="fatigue-bar" value="10" max="100"></progress>
                   <span class="metric-value" id="fatigue-value">10%</span>
                    </div>
                    <div class="metric-bar">
                        <label>Info Saturation</label>
                        <progress id="saturation-bar" value="20" max="100"></progress>
                    <span class="metric-value" id="saturation-value">20%</span>
                    </div>
                    <div class="metric-label">
                        <span>Flow State:</span> <strong id="flow-state-label">Calm</strong>
                    </div>
                </div>

                <!-- Drives Motivacionais -->
                <div class="dashboard-section">
                    <h4>Motivational Drives</h4>
                    <div class="chart-container">
                        <canvas id="drives-radar-chart"></canvas>
                    </div>
                </div>

                <!-- B√∫ssola de Racioc√≠nio -->
                <div class="dashboard-section">
                    <h4>Reasoning Compass</h4>
                    <div class="metric-slider">
                        <span class="slider-label">Coherence</span>
                        <input type="range" id="reasoning-slider" min="0" max="100" value="50" disabled>
                        <span class="slider-label">Novelty</span>
                    </div>
                    <div class="metric-label">
                        <span>Cognitive Mode:</span> <strong id="cognitive-mode-label">Stable</strong>
                    </div>
                </div>

                <!-- Identidade -->
                <div class="dashboard-section">
                    <h4>Identity</h4>
                    <div class="metric-label">
                        <span>Identity Version:</span> <strong id="identity-version-label">v1</strong>
                    </div>
                </div>
            </div>


            <div class="chat-input-container">
                <div class="chat-input" id="chat-input">
                    <input type="text" placeholder="Type a message..." id="message-input" autocomplete="off">
                    <button class="send-btn" id="send-btn" disabled>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                    </button>
                </div>
            </div>
                   </div>



        <!-- Agent Creation View -->
        <div class="view" id="create-view" style="display: none;">
            <div class="create-header">
                <h1>Create your Agent</h1>
                <p>Bring your imagination to life with CEAF V3.</p>
            </div>

            <div class="create-content">
                 <form id="agent-form" class="agent-form">
                    <div class="form-group">
                        <label for="agent-name">Agent Name</label>
                        <input type="text" id="agent-name" placeholder="e.g., Socrates" required>
                    </div>

                    <div class="form-group">
                        <label for="agent-persona">Tagline / Short Persona</label>
                        <input type="text" id="agent-persona" placeholder="A short, one-line description" required>
                    </div>

                    <div class="form-group">
                        <label for="agent-detailed-persona">Detailed Persona (Instructions)</label>
                        <textarea id="agent-detailed-persona" placeholder="Describe the agent's personality, background, and how it should behave." rows="6" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="model-select-create">Language Model</label>
                        <select id="model-select-create" required>
                            <option value="">Select a model...</option>
                        </select>
                    </div>

                    <button type="submit" class="btn-create" id="create-button" disabled>
                        Create Agent
                    </button>
                </form>
            </div>
        </div>
    </main>

    <!-- Auth Modal -->
    <div class="modal-overlay" id="auth-modal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h2>Sign in to Aura</h2>
                <button class="modal-close" id="auth-modal-close">&times;</button>
            </div>
            <div class="modal-content">
                <div class="auth-tabs">
                    <button class="auth-tab active" id="login-tab" onclick="switchAuthTab('login')">Sign in</button>
                    <button class="auth-tab" id="register-tab" onclick="switchAuthTab('register')">Sign up</button>
                </div>

                <form id="auth-form">
                    <div id="error-container"></div>
                    <div class="form-group" id="email-group" style="display: none;">
                        <input type="email" id="email" placeholder="Email" autocomplete="email">
                    </div>
                    <div class="form-group">
                        <input type="text" id="username" placeholder="Username" required autocomplete="username">
                    </div>
                    <div class="form-group">
                        <input type="password" id="password" placeholder="Password" required autocomplete="current-password">
                    </div>
                    <button type="submit" class="btn-auth" id="auth-submit-btn">Sign in</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Twerk / Config Modal -->
<div class="modal-overlay" id="config-modal" style="display: none;">
    <div class="modal wide-modal">
        <div class="modal-header">
            <h2>Agent Cognitive Architecture</h2>
            <button class="modal-close" id="config-modal-close">&times;</button>
        </div>
        <div class="modal-content">

            <!-- Navigation Tabs -->
            <div class="config-tabs">
                <button class="config-tab active" onclick="switchConfigTab('llm')">LLM & Brain</button>
                <button class="config-tab" onclick="switchConfigTab('memory')">Memory Weights</button>
                <button class="config-tab" onclick="switchConfigTab('mcl')">Personality (MCL)</button>
                <button class="config-tab" onclick="switchConfigTab('prompts')">System Prompts</button>
                <button class="config-tab" onclick="switchConfigTab('body')">Body & Drives</button>
            </div>

            <div class="config-body">
                <form id="agent-config-form">

                    <!-- TAB 1: LLM -->
                    <div id="conf-tab-llm" class="conf-section">
                        <h3>Model Selection</h3>
                        <div class="form-group">
                            <label>Smart Model (Reasoning/GTH)</label>
                            <input type="text" id="conf-llm-smart" class="code-input">
                        </div>
                        <div class="form-group">
                            <label>Fast Model (HTG/Classification)</label>
                            <input type="text" id="conf-llm-fast" class="code-input">
                        </div>
                        <div class="form-group">
                            <label>Creative Model (Simulation)</label>
                            <input type="text" id="conf-llm-creative" class="code-input">
                        </div>

                        <h3>Parameters</h3>
                        <div class="slider-group">
                            <label>Temperature: <span id="val-temp">0.7</span></label>
                            <input type="range" id="conf-llm-temp" min="0" max="2" step="0.1">
                        </div>
                         <div class="form-group">
                            <label>Max Output Tokens</label>
                            <input type="number" id="conf-llm-tokens">
                        </div>
                    </div>

                    <!-- TAB 2: Memory -->
                    <div id="conf-tab-memory" class="conf-section" style="display:none;">
                        <h3>Search Strategy Weights</h3>
                        <div class="slider-group">
                            <label>Semantic Weight (Meaning): <span id="val-sem">0.6</span></label>
                            <input type="range" id="conf-mem-semantic" min="0" max="1" step="0.05">
                        </div>
                        <div class="slider-group">
                            <label>Keyword Weight (Exact Match): <span id="val-key">0.4</span></label>
                            <input type="range" id="conf-mem-keyword" min="0" max="1" step="0.05">
                        </div>

                        <h3>Lifecycle</h3>
                        <div class="slider-group">
                            <label>Decay Rate (Forgetting): <span id="val-decay">0.01</span></label>
                            <input type="range" id="conf-mem-decay" min="0" max="0.1" step="0.001">
                        </div>
                    </div>

                    <!-- TAB 3: MCL -->
                    <div id="conf-tab-mcl" class="conf-section" style="display:none;">
                        <h3>Metacognition</h3>
                        <div class="slider-group">
                            <label>Agency Threshold (Trigger Deep Thinking): <span id="val-agency">2.0</span></label>
                            <input type="range" id="conf-mcl-agency" min="0" max="10" step="0.5">
                            <small>Higher = Agent thinks deeply less often.</small>
                        </div>

                        <h3>Baseline Biases</h3>
                        <div class="slider-group">
                            <label>Coherence Bias (Stay on topic): <span id="val-coh">0.7</span></label>
                            <input type="range" id="conf-mcl-coherence" min="0" max="1" step="0.1">
                        </div>
                        <div class="slider-group">
                            <label>Novelty Bias (Explore): <span id="val-nov">0.3</span></label>
                            <input type="range" id="conf-mcl-novelty" min="0" max="1" step="0.1">
                        </div>
                    </div>

                    <!-- TAB 4: Prompts -->
                    <div id="conf-tab-prompts" class="conf-section" style="display:none;">
                        <div class="form-group">
                            <label>GTH Rendering (Final Response)</label>
                            <textarea id="conf-prompt-gth" rows="15" class="code-input"></textarea>
                            <small>Variables: {agent_name}, {tone}, {values_summary}, {history_block}, {user_query}, {memory_context}...</small>
                        </div>
                        <div class="form-group">
                            <label>HTG Analysis (Perception)</label>
                            <textarea id="conf-prompt-htg" rows="8" class="code-input"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Agency Planning</label>
                            <textarea id="conf-prompt-agency" rows="8" class="code-input"></textarea>
                        </div>
                    </div>
<!-- TAB 5: Body & Drives -->
                       <div id="conf-tab-body" class="conf-section" style="display:none;">
                        <h3>Motivational Drives (Personality Base)</h3>
                        <p class="hint-text">Define how the agent's motivations evolve over time.</p>

                        <div class="slider-group">
                            <label>Passive Decay Rate: <span id="val-drive-decay">0.03</span>/h</label>
                            <input type="range" id="conf-drive-decay" min="0" max="0.2" step="0.01">
                            <small>Higher = Loses interest/motivation faster.</small>
                        </div>

                        <div class="slider-group">
                            <label>Curiosity Growth: <span id="val-drive-curiosity">0.05</span>/h</label>
                            <input type="range" id="conf-drive-curiosity" min="0" max="0.5" step="0.01">
                            <small>Higher = Gets bored/curious faster when idle.</small>
                        </div>

                        <div class="slider-group">
                            <label>Connection Growth: <span id="val-drive-connection">0.08</span>/h</label>
                            <input type="range" id="conf-drive-connection" min="0" max="0.5" step="0.01">
                            <small>Higher = Gets lonely faster.</small>
                        </div>

                        <h3 style="margin-top: 20px;">Virtual Body (Stamina)</h3>
                        <p class="hint-text">Define the agent's cognitive endurance.</p>

                        <div class="slider-group">
                            <label>Fatigue Accumulation: <span id="val-body-fatigue">0.3</span>x</label>
                            <input type="range" id="conf-body-fatigue" min="0.1" max="2.0" step="0.1">
                            <small>Higher = Tires quickly after complex tasks.</small>
                        </div>

                        <div class="slider-group">
                            <label>Fatigue Recovery: <span id="val-body-recovery">0.03</span>/h</label>
                            <input type="range" id="conf-body-recovery" min="0" max="0.5" step="0.01">
                            <small>Higher = Bounces back faster.</small>
                        </div>
                    </div>

                    <div class="modal-actions" style="margin-top: 20px; border-top: 1px solid var(--border-primary); padding-top: 15px;">
                        <button type="button" class="btn-secondary" onclick="hideConfigModal()">Cancel</button>
                        <button type="submit" class="btn-auth">Save Changes (Hot Reload)</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

    <!-- Agent Files Modal (RAG) -->
    <div class="modal-overlay" id="files-modal" style="display: none;">
        <div class="modal wide">
            <div class="modal-header">
                <h2>Agent Knowledge Files</h2>
                <button class="modal-close" onclick="closeFilesModal()">&times;</button>
            </div>
            <div class="modal-content">
                <p style="color: var(--text-secondary); margin-bottom: 20px;">Upload PDF or TXT files to provide this agent with specific knowledge. The agent will use this information to answer relevant questions (RAG).</p>
                <div id="files-list-container">
                    <p>No files uploaded for this agent yet.</p>
                </div>
                <div class="file-upload-area" id="knowledge-file-upload-area" style="margin-top: 20px;">
                    <div class="upload-icon">üì§</div>
                    <h3>Upload Knowledge File</h3>
                    <p>Click to browse or drag & drop a PDF or TXT file.</p>
                    <input type="file" id="knowledge-file-input" accept=".pdf,.txt" style="display: none;">
                </div>
            </div>
        </div>
    </div>

    <!-- Agent Options Modal (for Marketplace) -->
    <div class="modal-overlay" id="agent-options-overlay" style="display: none;">
        <!-- Content generated by JS -->
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
        <div class="spinner"></div>
    </div>


    <footer class="page-footer">
        <div class="footer-content">
            <p>&copy; 2024 Cognai ‚Ä¢ Aura CEAF V3</p>
        </div>
    </footer>

<script src="script.js"></script>
</body>
</html>